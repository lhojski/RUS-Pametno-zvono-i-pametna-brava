# ğŸ’¤ Sustav za upravljanje potroÅ¡njom energije

**Sustav za upravljanje potroÅ¡njom energije na Arduino Mega 2560**

![Arduino Mega Compatible](https://img.shields.io/badge/Platform-Arduino_Mega_2560-blue)
![LED Visualization](<https://img.shields.io/badge/Visualization-1_LEDs_(RGB)-yellowgreen>)

1. [Opis zadatka](#opis-projekta)
2. [Hardverske komponente](#hardverske-komponente)
3. [Slika spojeva](#slika-spojeva)
4. [Opis rjeÅ¡enja](#opis-rjesenja)
5. [Sleep modovi mikrokontrolera: Usporedba i primjena](#sleep_modovi)
6. [ZakljuÄak](#zakljucak)

## <a name="opis-zadatka"></a>1. Opis zadatka

Sustav demonstrira koriÅ¡tenje sleep modova za smanjenje potroÅ¡nje energije:

- LED treperi 5 sekundi u aktivnom modu
- Prelazak u sleep mode nakon aktivnog perioda
- BuÄ‘enje pomoÄ‡u:
  - Eksternog prekida (tipkalo na INT0)
  - Watchdog timera (~8s)
- Vizualna indikacija stanja LED diodom

**KljuÄne karakteristike:**

- Automatsko gaÅ¡enje LED u sleep modu
- PodrÅ¡ka za viÅ¡e sleep modova (Idle, Power-down, Standby)
- Optimizirana potroÅ¡nja energije

## <a name="hardverske-komponente"></a>2. Hardverske komponente

| Komponenta        | KoliÄina | Pin na Arduino Mega |
| ----------------- | -------- | ------------------- |
| Arduino Mega 2560 | 1        | -                   |
| LED dioda         | 1        | 13                  |
| Tipkalo           | 1        | 2 (INT0)            |
| Otpornik 220Î©     | 1        | -                   |

## <a name="slika-spojeva"></a>3. Slika spojeva

![Wiring Diagram](https://github.com/your-repo/blob/main/sleep-mode-wiring.png?)

- LED spojena na pin 13 kroz otpornik 220Î©
- Tipkalo spojeno na pin 2 i GND (s internim PULLUP)

## <a name="opis-rjesenja"></a>4. Opis rjeÅ¡enja

[Ovdje moÅ¾ete vidjeti simulaciju zadatka rjeÅ¡enu preko platforme wokwi](https://wokwi.com/projects/427675671903754241)

- KÃ´d koristi tri glavna dijela:

- Aktivni period: LED trepÄ‡e 5 puta uz ispis poruka u Serial monitor.

- Priprema za sleep:

  - LED se gasi

  - Inicijalizira se Watchdog timer na otprilike 8 sekundi

  - Arduino prelazi u SLEEP_MODE_PWR_DOWN

- BuÄ‘enje:

  - Ako je uzrok buÄ‘enja tipkalo, ispisuje se "Probudio me prekid s tipkala!"

  - Ako je uzrok buÄ‘enja WDT, ispisuje se "Probudio me Watchdog Timer!"

- Prekidi

  - Tipkalo koristi attachInterrupt za FALLING rub, jer koristimo INPUT_PULLUP.

  - WDT interrupt postavljen da se javi nakon otprilike 8 sekundi koristeÄ‡i WDTCSR.

## <a name="sleep_modovi"></a>5. Sleep modovi mikrokontrolera: Usporedba i primjena

## Tablica usporedbe sleep modova

| Sleep Mode     | PotroÅ¡nja energije | Å to se iskljuÄuje?                        | Vrijeme buÄ‘enja  | NaÄini buÄ‘enja                      |
| -------------- | ------------------ | ----------------------------------------- | ---------------- | ----------------------------------- |
| **Idle**       | Minimalna uÅ¡teda   | CPU, Flash memorija, ALU                  | Vrlo brzo (~6Âµs) | Bilo koji prekid                    |
| **Power-down** | Maksimalna uÅ¡teda  | Gotovo sve (osim WDT i eksternih prekida) | Sporo (~6ms)     | Eksterni prekid, WDT, promjena pina |
| **Standby**    | Velika uÅ¡teda      | Gotovo sve (osim WDT i eksternih prekida) | Brzo (~6Âµs)      | Eksterni prekid, WDT                |

## Detaljna objaÅ¡njenja

### 1. **Idle Mode**

- **Karakteristike**:
  - Najmanja uÅ¡teda energije od tri moda
  - Brzo buÄ‘enje (~6 mikrosekundi)
- **Ostaje aktivan**:
  - Svi periferni moduli
  - Timeri
  - Watchdog timer
  - Eksterni prekidi
- **Primjena**:
  - Kratki periodi neaktivnosti
  - Aplikacije gdje je brzina odgovora kritiÄna

### 2. **Power-down Mode**

- **Karakteristike**:
  - NajveÄ‡a uÅ¡teda energije
  - Sporo buÄ‘enje (~6 milisekundi)
- **Ostaje aktivan**:
  - Watchdog timer (ako je omoguÄ‡en)
  - Eksterni prekidi (INT0, INT1)
- **Primjena**:
  - Dugi periodi neaktivnosti
  - Aplikacije na bateriju gdje je Å¾ivotni vijek bitan

### 3. **Standby Mode**

- **Karakteristike**:
  - SliÄna uÅ¡teda energije kao Power-down
  - BrÅ¾e buÄ‘enje (~6 mikrosekundi)
- **Ostaje aktivan**:
  - Watchdog timer
  - Eksterni prekidi
- **Primjena**:
  - Aplikacije koje zahtijevaju ravnoteÅ¾u izmeÄ‘u uÅ¡tede energije i brzine odgovora

## Preporuke za koriÅ¡tenje

1. **Power-down**:

   - Koristite za maksimalnu uÅ¡tedu energije
   - Primjer: Senzorske stanice koje mjere svakih sat vremena

2. **Standby**:

   - Koristite kada trebate dobru uÅ¡tedu uz relativno brzo buÄ‘enje
   - Primjer: Daljinski upravljaÄi

3. **Idle**:
   - Koristite kada je brzina odgovora vaÅ¾nija od uÅ¡tede energije
   - Primjer: UreÄ‘aji u kontinuiranoj komunikaciji

## Najefikasniji mod

**Power-down mode** nudi najveÄ‡u uÅ¡tedu energije i najbolje je rjeÅ¡enje za aplikacije gdje mikrokontroler veÄ‡inu vremena provodi u neaktivnom stanju. MeÄ‘utim, za aplikacije koje zahtijevaju brÅ¾e buÄ‘enje, **Standby mode** predstavlja dobar kompromis.

> **Napomena:** Vrijeme buÄ‘enja moÅ¾e varirati ovisno o specifiÄnom mikrokontroleru i njegovim postavkama.

## <a name="zakljucak"></a>6. ZakljuÄak

Implementacija sleep modova omoguÄ‡uje:

- Smanjenje potroÅ¡nje do 99% u odnosu na aktivni mod

- Fleksibilno buÄ‘enje pomoÄ‡u viÅ¡e izvora

- Jednostavnu integraciju u postojeÄ‡e projekte

Primjena:

- Baterijski napajani ureÄ‘aji

- Senzorske stanice

- IoT ureÄ‘aji s periodiÄnim radom
